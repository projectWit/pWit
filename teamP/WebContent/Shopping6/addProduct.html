<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>상품 등록</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

<link rel="stylesheet" type="text/css" media="all" href="css/niceForm.css" />

<script type="text/javascript">

$(function(e){
	
 	$.post('makeMainCateJson.jsp',function(data) {
		var elements = eval("(" + data + ")");
		$.each(elements, function(i, elem) {
			
			var html = '<option value='+elem.no+'>'+elem.maincate+'</option>';
			$('select#prd_maincate').append(html);				
		});
	});
	
	function refreshSubCate(mct) {
		$.get('makeSubCateJson.jsp', {'mct': mct}, function(data) {
			var elements = eval("(" + data + ")");
			$('select#prd_subcate').empty();
			$.each(elements, function(i, elem) {
				var html = '<option value='+elem.no+'>'+elem.subcate+'</option>';
				$('select#prd_subcate').append(html);
			});
		});
	}
	
	refreshSubCate(1);
	
	$.get('makeNationJson.jsp',function(data) {
		var elements = eval("(" + data + ")");
		$.each(elements, function(i, elem) {
			var html = '<option value='+elem.no
			if(elem.nation=='대한민국') {
				html += ' selected';
			}
			html += '>'+elem.nation+'</option>';
			$('select#prd_nation').append(html);
		});
	}); 
	
	
 	$('select#prd_maincate').change(function() {
		refreshSubCate($('select#prd_maincate').val());
	}); 
});


    $(document).ready(function(){
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader(); //파일을 읽기 위한 FileReader객체 생성
                reader.onload = function (e) { 
                //파일 읽어들이기를 성공했을때 호출되는 이벤트 핸들러
                    $('img#imgprevw').attr('src', e.target.result)
                	.attr('width', '100px')
                	.attr('height', '100px');
                    //이미지 Tag의 SRC속성에 읽어들인 File내용을 지정
                    //(아래 코드에서 읽어들인 dataURL형식)
                }                    
                reader.readAsDataURL(input.files[0]);
                //File내용을 읽어 dataURL형식의 문자열로 저장
            }
        }//readURL()--

        //file 양식으로 이미지를 선택(값이 변경) 되었을때 처리하는 코드
        $("input#prd_mainimg").change(function(){
            readURL(this);
        });
     });

</script>



</head>

<body><div class="niceFormContainer">
<form  action="addProductPro.jsp" method="post" class="niceform">
		


	<fieldset>
    	<legend>상품 등록</legend>
    	
    	<dl>
        	<dt><label for="prd_name">상품명:</label></dt>
            <dd><input type="text" name="prd_name" id="prd_name" size="64" maxlength="255" /></dd>
        </dl>        
        <dl>
        	<dt><label for="prd_modelno">상품모델번호:</label></dt>
            <dd><input type="text" name="prd_modelno" id="prd_modelno" size="64" maxlength="127" /></dd>
        </dl>
        <dl>
        	<dt><label for="prd_mainimg">메인 상품이미지:</label></dt>
            <dd><input type="file" name="prd_mainimg" id="prd_mainimg" /></dd>
            
        </dl>
        <dl>
        	<dt><label for="prd_detailimg">상세 상품이미지:</label></dt>
            <dd><input type="file" name="prd_detailimg" id="prd_detailimg" /></dd>
        </dl>

        <dl>
        	<dt><label for="prd_maincate">상품 대분류:</label></dt>
            <dd>
            	<select size="1" name="prd_maincate" id="prd_maincate">
                </select>                
            </dd>
        </dl>
        <dl>
            
        
        	<dt><label for="prd_subcate">상품 중분류:</label></dt>
            <dd>
            	<select size="1" name="prd_subcate" id="prd_subcate">
                </select>                
            </dd>
            
        </dl>
        <dl>
        	<dt><label for="prd_maker">제조사:</label></dt>
            <dd><input type="text" name="prd_maker" id="prd_maker" size="64" maxlength="127" /></dd>
        </dl> 
        <dl>
        	<dt><label for="prd_nation">제조국:</label></dt>
            <dd>
            	<select size="1" name="prd_nation" id="prd_nation">
                </select>                
            </dd>
            
        </dl>
        <dl>
        	<dt><label for="prd_price">가격:</label></dt>
            <dd><input type="text" name="prd_price" id="prd_price" size="11" maxlength="11" /></dd>
           
        </dl>
        <dl>
        	<dt><label for="prd_hasopt">옵션 여부:</label></dt>

            <dd>
            	<input type="radio" name="prd_hasopt" id="noOpt" value="0" checked/><label for="noOpt" class="opt">없음</label>
                <input type="radio" name="prd_hasopt" id="hasOpt" value="1" /><label for="hasOpt" class="opt">있음</label>
            </dd>
        </dl> 
        <dl>
        	<dt><label for="prd_buyMin">최소 구매수량:</label></dt>
            <dd><input type="text" name="prd_buyMin" id="prd_buyMin" size="11" maxlength="5" /></dd>
 
        	<dt><label for="prd_buyMax">최대 구매수량:</label></dt>
            <dd><input type="text" name="prd_buyMax" id="prd_buyMax" size="11" maxlength="5" /></dd>
        </dl>
        <dl>
        	<dt><label for="prd_remain">재고 수량:</label></dt>
            <dd><input type="text" name="prd_remain" id="prd_remain" size="11" maxlength="5" /></dd>
        </dl>
        
       
     
    </fieldset>
    
    
    
    <fieldset class="action">
    	<input type="submit" name="submit" id="submit" value="등록하기" />
    

      <button type="button" name="cancel" id="cancel">취소</button>
  
    </fieldset>
    
    


</form>
 <div id="imgprevw">
        	<img id="imgprevw"/>
        </div>

</div>

</body>
</html>